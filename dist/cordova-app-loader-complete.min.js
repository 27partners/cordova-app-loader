!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){window.CordovaAppLoader=n(1),window.CordovaFileCache=n(2),window.CordovaPromiseFS=n(3),window.Promise=n(4),window.setImmediate=window.setTimeout},function(t,e,n){function o(t){var e={};return Object.keys(t).forEach(function(n){var o=t[n].filename;"/"===o[0]&&(o=o[0].substr(1)),e[o]=t[n]}),e}function r(t){if(!t)throw new Error("CordovaAppLoader has no options!");if(!t.fs)throw new Error('CordovaAppLoader has no "fs" option (cordova-promise-fs)');if(!t.serverRoot)throw new Error('CordovaAppLoader has no "serverRoot" option.');if(!window.pegasus||!window.Manifest)throw new Error("CordovaAppLoader bootstrap.js is missing.");u=t.fs.Promise,this.manifest=window.Manifest,this.newManifest=null,t.serverRoot=t.serverRoot||"",t.serverRoot&&"/"!==t.serverRoot[t.serverRoot.length-1]&&(t.serverRoot+="/"),this.newManifestUrl=t.serverRoot+(t.manifest||"manifest.json"),t.mode&&(t.mode="mirror"),this.cache=new i(t),this._toBeDeleted=[],this._toBeDownloaded=[],this._updateReady=!1,this._checkTimeout=t.checkTimeout||1e4}var i=n(2),u=null;r.prototype.check=function(t){var e=this,n=this.manifest;return new u(function(r,i){function u(t){e.cache.ready.then(function(){if(!t.files)return void i('Downloaded Manifest has no "files" attribute.');var u=o(t.files),s=o(n.files);e._toBeDownloaded=Object.keys(u).filter(function(t){return!s[t]||s[t].version!==u[t].version||!e.cache.isCached(t)}),e.cache.list().then(function(n){e._toBeDeleted=n.map(function(t){return"/"===t[0]&&(t=t.substr(1)),t.substr(e.cache._localRoot.length)}).filter(function(t){return!u[t]}).concat(e._toBeDownloaded),e._toBeDeleted.length>0||e._toBeDownloaded.length>0?(e.newManifest=t,e.newManifest.root=e.cache.toInternalURL("/")+(e.newManifest.root||""),r(!0)):r(!1)},i)},i)}"string"==typeof t&&(e.newManifestUrl=t,t=void 0),"object"==typeof t?u(t):(pegasus(e.newManifestUrl).then(u,i),setTimeout(function(){i(new Error("timeout"))},e._checkTimeout))})},r.prototype.canDownload=function(){return!!this.newManifest&&!this._updateReady},r.prototype.canUpdate=function(){return this._updateReady},r.prototype.download=function(t){var e=this;return e.canDownload()?(localStorage.removeItem("manifest"),this.manifest.files=Manifest.files={},e.cache.remove(e._toBeDeleted,!0).then(function(){return e.cache.add(e._toBeDownloaded),e.cache.download(t)}).then(function(){return e._toBeDeleted=[],e._toBeDownloaded=[],e._updateReady=!0,e.newManifest},function(t){return t&&t.length&&e.cache.remove(t),t})):u.resolve(null)},r.prototype.update=function(t){return this._updateReady?(localStorage.setItem("manifest",JSON.stringify(this.newManifest)),t!==!1&&location.reload(),!0):!1},r.prototype.clear=function(){return localStorage.removeItem("manifest"),this.cache.clear()},r.prototype.reset=function(){return this.clear().then(function(){location.reload()},function(){location.reload()})},t.exports=r},function(t,e,n){function o(t){return"/"===t[0]&&(t=t.substr(1)),t}function r(t){var e=this;if(this._fs=t.fs,!this._fs)throw new Error('Missing required option "fs". Add an instance of cordova-promise-fs.');u=this._fs.Promise,this._mirrorMode="hash"!==t.mode,this._retry=t.retry||[500,1500,8e3],this._cacheBuster=!!t.cacheBuster,this._localRoot=o(t.localRoot||"data"),"/"!==this._localRoot[this._localRoot.length-1]&&(this._localRoot+="/"),this._serverRoot=t.serverRoot||"",this._serverRoot&&"/"!==this._serverRoot[this._serverRoot.length-1]&&(this._serverRoot+="/"),"./"===this._serverRoot&&(this._serverRoot=""),this._downloading=[],this._added=[],this._cached={},this.ready=this._fs.ensure(this._localRoot).then(function(){return e.list()})}var i=n(5),u=null,s="undefined"!=typeof cordova;r.prototype.list=function(){var t=this;return new u(function(e){t._fs.list(t._localRoot,"rfe").then(function(n){t._cached={},n=n.map(function(e){var n=o(e.fullPath);return t._cached[n]={toInternalURL:s?e.toInternalURL():e.toURL(),toURL:e.toURL()},e.fullPath}),e(n)},function(){e([])})})},r.prototype.add=function(t){t||(t=[]),"string"==typeof t&&(t=[t]);var e=this;return t.forEach(function(t){t=e.toServerURL(t),-1===e._added.indexOf(t)&&e._added.push(t)}),e.isDirty()},r.prototype.remove=function(t,e){t||(t=[]);var n=[];"string"==typeof t&&(t=[t]);var o=this;return t.forEach(function(t){var e=o._added.indexOf(o.toServerURL(t));e>=0&&o._added.splice(e,1);var r=o.toPath(t);n.push(o._fs.remove(r)),delete o._cached[r]}),e?u.all(n):o.isDirty()},r.prototype.getDownloadQueue=function(){var t=this,e=t._added.filter(function(e){return!t.isCached(e)});return e},r.prototype.getAdded=function(){return this._added},r.prototype.isDirty=function(){return this.getDownloadQueue().length>0},r.prototype.download=function(t){var e=this._fs,n=this;return n.abort(),new u(function(o,r){e.ensure(n._localRoot).then(function(){return n.list()}).then(function(){if(!n.isDirty())return void o(n);var i=n.getDownloadQueue(),u=[],s=n._downloading.length,c=n._downloading.length,a=n._downloading.length+i.length;i.forEach(function(i){var f,h=n.toPath(i);"function"==typeof t&&(f=function(e){e.queueIndex=s,e.queueSize=a,e.url=i,e.path=h,e.percentage=s/a,e.loaded>0&&e.total>0&&s!==a&&(e.percentage+=e.loaded/e.total/a),u.indexOf(i)<0&&(u.push(i),s++),t(e)});var d=function(){c++,c===a&&(n._downloading=[],n.list().then(function(){f&&f(new ProgressEvent),n.isDirty()?r(n.getDownloadQueue()):o(n)},r))},l=i;n._cacheBuster&&(l+="?"+Date.now());var p=e.download(i,h,{retry:n._retry},f);p.then(d,d),n._downloading.push(p)})},r)})},r.prototype.abort=function(){this._downloading.forEach(function(t){t.abort()}),this._downloading=[]},r.prototype.isCached=function(t){return t=this.toPath(t),!!this._cached[t]},r.prototype.clear=function(){var t=this;return this._cached={},this._fs.removeDir(this._localRoot).then(function(){return t._fs.ensure(t._localRoot)})},r.prototype.toInternalURL=function(t){return path=this.toPath(t),this._cached[path]?this._cached[path].toInternalURL:t},r.prototype.get=function(t){return path=this.toPath(t),this._cached[path]?this._cached[path].toInternalURL:this.toServerURL(t)},r.prototype.toDataURL=function(t){return this._fs.toDataURL(this.toPath(t))},r.prototype.toURL=function(t){return path=this.toPath(t),this._cached[path]?this._cached[path].toURL:t},r.prototype.toServerURL=function(t){return"/"===t[0]&&(t=t.substr(1)),t.indexOf("://")<0?this._serverRoot+t:t},r.prototype.toPath=function(t){return this._mirrorMode?(t=t||"",len=this._serverRoot.length,t.substr(0,len)!==this._serverRoot?(t=o(t),this._localRoot+t):this._localRoot+t.substr(len)):this._localRoot+i(t)+t.substr(t.lastIndexOf("."))},t.exports=r},function(t){function e(t,n,o,r){t.getDirectory(n[0],{create:!0},function(t){n.length>1?e(t,n.slice(1),o,r):o(t)},r)}function n(t){var e=t.split("/");return e.length>1?(e.splice(e.length-1,1),e.join("/")):""}function o(t){var e=t.split("/");return e[e.length-1]}var r=[],i=0;t.exports=function(t){function u(t){return new x(function(e){return e(t)})}function s(t){return c(n(t)).then(function(){return d(t,{create:!0})})}function c(t){return new x(function(n,o){return C.then(function(r){t?(t=t.split("/").filter(function(t){return t&&t.length>0&&"."!==t[0]}),e(r.root,t,n,o)):n(r.root)},o)})}function a(t){return new x(function(e,n){d(t).then(function(t){e(t)},function(t){1===t.code?e(!1):n(t)})})}function f(t){return d(t).then(function(t){return t.toURL()})}function h(t){return p(t,"readAsDataURL")}function d(t,e){return e=e||{},new x(function(n,o){return C.then(function(r){r.root.getFile(t,e,n,o)},o)})}function l(t,e){return e=e||{},new x(function(n,o){return C.then(function(r){t&&"/"!==t?r.root.getDirectory(t,e,n,o):n(r.root)},o)})}function p(t,e){return e=e||"readAsText",d(t).then(function(t){return new x(function(n,o){t.file(function(t){var o=new FileReader;o.onloadend=function(){n(this.result)},o[e](t)},o)})})}function w(t){return p(t).then(JSON.parse)}function v(t,e,o){return c(n(t)).then(function(){return d(t,{create:!0})}).then(function(t){return new x(function(n,r){t.createWriter(function(t){t.onwriteend=n,t.onerror=r,"string"==typeof e?e=new Blob([e],{type:o||"text/plain"}):e instanceof Blob!=!0&&(e=new Blob([JSON.stringify(e,null,4)],{type:o||"application/json"})),t.write(e)},r)})})}function y(t,e){return c(n(e)).then(function(n){return d(t).then(function(t){return new x(function(r,i){t.moveTo(n,o(e),r,i)})})})}function _(t,e){return c(n(e)).then(function(n){return d(t).then(function(t){return new x(function(r,i){t.copyTo(n,o(e),r,i)})})})}function m(t,e){var n=e?d:a;return new x(function(e,o){n(t).then(function(t){t!==!1?t.remove(e,o):e(1)},o)}).then(function(t){return 1===t?!1:!0})}function g(t){return l(t).then(function(t){return new x(function(e,n){t.removeRecursively(e,n)})})}function R(t,e){e=e||"";var n=e.indexOf("r")>-1,o=e.indexOf("e")>-1,r=e.indexOf("f")>-1,i=e.indexOf("d")>-1;return r&&i&&(r=!1,i=!1),new x(function(e,s){return l(t).then(function(t){var c=t.createReader();c.readEntries(function(t){var c=[u(t)];n&&t.filter(function(t){return t.isDirectory}).forEach(function(t){c.push(R(t.fullPath,"re"))}),x.all(c).then(function(t){var n=[];n=n.concat.apply(n,t),r&&(n=n.filter(function(t){return t.isFile})),i&&(n=n.filter(function(t){return t.isDirectory})),o||(n=n.map(function(t){return t.fullPath})),e(n)},s)},s)},s)})}function D(){for(;r.length>0&&i<t.concurrency;){i++;var e=r.pop(),n=e.shift(),o=e.shift(),u=e.shift(),s=e.shift(),c=e.shift(),a=e.shift(),f=e.shift(),h=e.shift();n._aborted?i--:o?(n.download.call(n,u,s,c,a,f,h),n.onprogress&&n.onprogress(new ProgressEvent)):n.upload.call(n,s,u,c,a,h,f)}}function L(t){return i--,D(),t}function U(e,n,o,u,s){"function"==typeof u&&(s=u,u={}),n=encodeURI(n),E&&(o=A(o)),u=u||{},u.retry&&u.retry.length||(u.retry=t.retry),u.retry=u.retry.concat();var c=new FileTransfer;s=s||u.onprogress,"function"==typeof s&&(c.onprogress=s);var a=new x(function(t,s){var a=function(i){if(0===u.retry.length)s(i);else{r.unshift([c,e,n,o,t,a,u.trustAllHosts||!1,u]);var f=u.retry.shift();f>0?setTimeout(L,f):L()}};u.retry.unshift(0),i++,a()});return a.then(L,L),a.progress=function(t){return c.onprogress=t,a},a.abort=function(){return c._aborted=!0,c.abort(),a},a}function b(t,e,n,o){return U(!0,t,e,n,o)}function S(t,e,n,o){return U(!1,e,t,n,o)}var x=t.Promise||window.Promise;if(!x)throw new Error("No Promise library given in options.Promise");this.options=t=t||{},t.persistent=void 0!==t.persistent?t.persistent:!0,t.storageSize=t.storageSize||20971520,t.concurrency=t.concurrency||3,t.retry=t.retry||[];var P,E="undefined"!=typeof cordova;E?P=new x(function(t,e){document.addEventListener("deviceready",t,!1),setTimeout(function(){e(new Error("deviceready has not fired after 5 seconds."))},5100)}):(P=u(!0),"undefined"!=typeof webkitRequestFileSystem?(window.requestFileSystem=webkitRequestFileSystem,window.FileTransfer=function(){},FileTransfer.prototype.download=function(t,e,n,o){var r=new XMLHttpRequest;return r.open("GET",t),r.onreadystatechange=function(){4==r.readyState&&(200===r.status?v(e,r.responseText).then(n,o):o(r.status))},r.send(),r},window.ProgressEvent=function(){}):window.requestFileSystem=function(t,e,n,o){o(new Error("requestFileSystem not supported!"))});var C=new x(function(e,n){P.then(function(){window.requestFileSystem(t.persistent?1:0,t.storageSize,e,n),setTimeout(function(){n(new Error("Could not retrieve FileSystem after 5 seconds."))},5100)},n)});C.then(function(t){window.__fs=t},function(t){console.error("Could not get Cordova FileSystem:",t)});var M,A;return E?(A=function(e){return"/"!==e[0]&&(e="/"+e),"cdvfile://localhost/"+(t.persistent?"persistent":"temporary")+e},M=function(t){return d(t).then(function(t){return t.toInternalURL()})}):(A=function(e){return"/"!==e[0]&&(e="/"+e),"filesystem:"+location.origin+(t.persistent?"/persistent":"/temporary")+e},M=function(t){return d(t).then(function(t){return t.toURL()})}),{fs:C,file:d,filename:o,dir:l,dirname:n,create:s,read:p,readJSON:w,write:v,move:y,copy:_,remove:m,removeDir:g,list:R,ensure:c,exists:a,download:b,upload:S,toURL:f,isCordova:E,toInternalURLSync:A,toInternalURL:M,toDataURL:h,deviceready:P,options:t,Promise:x}}},function(t){!function(e,n){function o(t,e){return(typeof e)[0]==t}function r(t,u){return u=function s(c,a,f,h,d,l){function p(t){return function(e){d&&(d=0,s(o,t,e))}}if(h=s.q,c!=o)return r(function(t,e){h.push({p:this,r:t,j:e,1:c,0:a})});if(f&&o(e,f)|o(n,f))try{d=f.then}catch(t){a=0,f=t}if(o(e,d))try{d.call(f,p(1),a=p(0))}catch(t){a(t)}else for(u=function(n,u){return o(e,n=a?n:u)?r(function(t,e){i(this,t,e,f,n)}):t},l=0;l<h.length;)d=h[l++],o(e,c=d[a])?i(d.p,d.r,d.j,f,c):(a?d.r:d.j)(f)},u.q=[],t.call(t={then:function(t,e){return u(t,e)},catch:function(t){return u(0,t)}},function(t){u(o,1,t)},function(t){u(o,0,t)}),t}function i(t,r,i,u,s){setImmediate(function(){try{u=s(u),s=u&&o(n,u)|o(e,u)&&u.then,o(e,s)?u==t?i(TypeError()):s.call(u,r,i):r(u)}catch(t){i(t)}})}function u(t){return r(function(e){e(t)})}t.exports=r,r.resolve=u,r.reject=function(t){return r(function(e,n){n(t)})},r.all=function(t){return r(function(e,n,o,r){r=[],o=t.length||e(r),t.map(function(t,i){u(t).then(function(t){r[i]=t,--o||e(r)},n)})})}}("f","o")},function(t){function e(t,e){var n,o,r,i,u,s,c,a;for(n=3&t.length,o=t.length-n,r=e,u=3432918353,s=461845907,a=0;o>a;)c=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24,++a,c=(65535&c)*u+(((c>>>16)*u&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c,r=r<<13|r>>>19,i=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&i)+27492+(((i>>>16)+58964&65535)<<16);switch(c=0,n){case 3:c^=(255&t.charCodeAt(a+2))<<16;case 2:c^=(255&t.charCodeAt(a+1))<<8;case 1:c^=255&t.charCodeAt(a),c=(65535&c)*u+(((c>>>16)*u&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,r^=c}return r^=t.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0}t.exports=e}]);