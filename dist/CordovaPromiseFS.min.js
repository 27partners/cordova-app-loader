var CordovaPromiseFS=function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n){function t(n,e,r,o){n.getDirectory(e[0],{create:!0},function(n){e.length>1?t(n,e.slice(1),r,o):r(n)},o)}function e(n){var t=n.split("/");return t.length>1?(t.splice(t.length-1,1),t.join("/")):""}function r(n){var t=n.split("/");return t[t.length-1]}var o=[],i=0;n.exports=function(n){function u(n){return new L(function(t){return t(n)})}function c(n){return f(e(n)).then(function(){return d(n,{create:!0})})}function f(n){return new L(function(e,r){return q.then(function(o){n?(n=n.split("/").filter(function(n){return n&&n.length>0&&"."!==n[0]}),t(o.root,n,e,r)):e(o.root)},r)})}function s(n){return new L(function(t,e){d(n).then(function(n){t(n)},function(n){1===n.code?t(!1):e(n)})})}function a(n){return d(n).then(function(n){return n.toURL()})}function l(n){return h(n,"readAsDataURL")}function d(n,t){return t=t||{},new L(function(e,r){return q.then(function(o){o.root.getFile(n,t,e,r)},r)})}function p(n,t){return t=t||{},new L(function(e,r){return q.then(function(o){n&&"/"!==n?o.root.getDirectory(n,t,e,r):e(o.root)},r)})}function h(n,t){return t=t||"readAsText",d(n).then(function(n){return new L(function(e,r){n.file(function(n){var r=new FileReader;r.onloadend=function(){e(this.result)},r[t](n)},r)})})}function y(n){return h(n).then(JSON.parse)}function w(n,t,r){return f(e(n)).then(function(){return d(n,{create:!0})}).then(function(n){return new L(function(e,o){n.createWriter(function(n){n.onwriteend=e,n.onerror=o,"string"==typeof t?t=new Blob([t],{type:r||"text/plain"}):t instanceof Blob!=!0&&(t=new Blob([JSON.stringify(t,null,4)],{type:r||"application/json"})),n.write(t)},o)})})}function v(n,t){return f(e(t)).then(function(e){return d(n).then(function(n){return new L(function(o,i){n.moveTo(e,r(t),o,i)})})})}function m(n,t){return f(e(t)).then(function(e){return d(n).then(function(n){return new L(function(o,i){n.copyTo(e,r(t),o,i)})})})}function g(n,t){var e=t?d:s;return new L(function(t,r){e(n).then(function(n){n!==!1?n.remove(t,r):t(1)},r)}).then(function(n){return 1===n?!1:!0})}function S(n){return p(n).then(function(n){return new L(function(t,e){n.removeRecursively(t,e)})})}function F(n,t){t=t||"";var e=t.indexOf("r")>-1,r=t.indexOf("e")>-1,o=t.indexOf("f")>-1,i=t.indexOf("d")>-1;return o&&i&&(o=!1,i=!1),new L(function(t,c){return p(n).then(function(n){var f=n.createReader();f.readEntries(function(n){var f=[u(n)];e&&n.filter(function(n){return n.isDirectory}).forEach(function(n){f.push(F(n.fullPath,"re"))}),L.all(f).then(function(n){var e=[];e=e.concat.apply(e,n),o&&(e=e.filter(function(n){return n.isFile})),i&&(e=e.filter(function(n){return n.isDirectory})),r||(e=e.map(function(n){return n.fullPath})),t(e)},c)},c)},c)})}function R(){for(;o.length>0&&i<n.concurrency;){i++;var t=o.pop(),e=t.shift(),r=t.shift(),u=t.shift(),c=t.shift(),f=t.shift(),s=t.shift(),a=t.shift(),l=t.shift();e._aborted?i--:r?(e.download.call(e,u,c,f,s,a,l),e.onprogress&&e.onprogress(new ProgressEvent)):e.upload.call(e,c,u,f,s,l,a)}}function x(n){return i--,R(),n}function T(t,e,r,u,c){"function"==typeof u&&(c=u,u={}),e=encodeURI(e),U&&(r=O(r)),u=u||{},u.retry&&u.retry.length||(u.retry=n.retry),u.retry=u.retry.concat();var f=new FileTransfer;c=c||u.onprogress,"function"==typeof c&&(f.onprogress=c);var s=new L(function(n,c){var s=function(i){if(0===u.retry.length)c(i);else{o.unshift([f,t,e,r,n,s,u.trustAllHosts||!1,u]);var a=u.retry.shift();a>0?setTimeout(x,a):x()}};u.retry.unshift(0),i++,s()});return s.then(x,x),s.progress=function(n){return f.onprogress=n,s},s.abort=function(){return f._aborted=!0,f.abort(),s},s}function b(n,t,e,r){return T(!0,n,t,e,r)}function E(n,t,e,r){return T(!1,t,n,e,r)}var L=n.Promise||window.Promise;if(!L)throw new Error("No Promise library given in options.Promise");this.options=n=n||{},n.persistent=void 0!==n.persistent?n.persistent:!0,n.storageSize=n.storageSize||20971520,n.concurrency=n.concurrency||3,n.retry=n.retry||[];var P,U="undefined"!=typeof cordova;U?P=new L(function(n,t){document.addEventListener("deviceready",n,!1),setTimeout(function(){t(new Error("deviceready has not fired after 5 seconds."))},5100)}):(P=u(!0),"undefined"!=typeof webkitRequestFileSystem?(window.requestFileSystem=webkitRequestFileSystem,window.FileTransfer=function(){},FileTransfer.prototype.download=function(n,t,e,r){var o=new XMLHttpRequest;return o.open("GET",n),o.onreadystatechange=function(){4==o.readyState&&(200===o.status?w(t,o.responseText).then(e,r):r(o.status))},o.send(),o},window.ProgressEvent=function(){}):window.requestFileSystem=function(n,t,e,r){r(new Error("requestFileSystem not supported!"))});var q=new L(function(t,e){P.then(function(){window.requestFileSystem(n.persistent?1:0,n.storageSize,t,e),setTimeout(function(){e(new Error("Could not retrieve FileSystem after 5 seconds."))},5100)},e)});q.then(function(n){window.__fs=n},function(n){console.error("Could not get Cordova FileSystem:",n)});var D,O;return U?(O=function(t){return"/"!==t[0]&&(t="/"+t),"cdvfile://localhost/"+(n.persistent?"persistent":"temporary")+t},D=function(n){return d(n).then(function(n){return n.toInternalURL()})}):(O=function(t){return"/"!==t[0]&&(t="/"+t),"filesystem:"+location.origin+(n.persistent?"/persistent":"/temporary")+t},D=function(n){return d(n).then(function(n){return n.toURL()})}),{fs:q,file:d,filename:r,dir:p,dirname:e,create:c,read:h,readJSON:y,write:w,move:v,copy:m,remove:g,removeDir:S,list:F,ensure:f,exists:s,download:b,upload:E,toURL:a,isCordova:U,toInternalURLSync:O,toInternalURL:D,toDataURL:l,deviceready:P,options:n,Promise:L}}}]);