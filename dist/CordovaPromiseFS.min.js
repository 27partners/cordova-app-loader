var CordovaPromiseFS=function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n){function t(n,e,r,o){n.getDirectory(e[0],{create:!0},function(n){e.length>1?t(n,e.slice(1),r,o):r(n)},o)}function e(n){return n=n.substr(0,n.lastIndexOf("/")+1),"/"===n[0]&&(n=n.substr(1)),n}function r(n){return n.substr(n.lastIndexOf("/")+1)}function o(n){return"/"===n[0]&&(n=n.substr(1)),n&&n.indexOf(".")<0&&"/"!==n[n.length-1]&&(n+="/"),"./"===n&&(n=""),n}var i=[],u=0;n.exports=function(n){function f(n){return new O(function(t){return t(n)})}function c(n){return new O(function(e,r){return q.then(function(o){n?(n=n.split("/").filter(function(n){return n&&n.length>0&&"."!==n[0]}),t(o.root,n,e,r)):e(o.root)},r)})}function s(n,t){return n=o(n),t=t||{},new O(function(e,r){return q.then(function(o){o.root.getFile(n,t,e,r)},r)})}function a(n,t){return n=o(n),t=t||{},new O(function(e,r){return q.then(function(o){n&&"/"!==n?o.root.getDirectory(n,t,e,r):e(o.root)},r)})}function l(n,t){t=t||"";var e=t.indexOf("r")>-1,r=t.indexOf("e")>-1,o=t.indexOf("f")>-1,i=t.indexOf("d")>-1;return o&&i&&(o=!1,i=!1),new O(function(t,u){return a(n).then(function(n){var c=n.createReader();c.readEntries(function(n){var c=[f(n)];e&&n.filter(function(n){return n.isDirectory}).forEach(function(n){c.push(l(n.fullPath,"re"))}),O.all(c).then(function(n){var e=[];e=e.concat.apply(e,n),o&&(e=e.filter(function(n){return n.isFile})),i&&(e=e.filter(function(n){return n.isDirectory})),r||(e=e.map(function(n){return n.fullPath})),t(e)},u)},u)},u)})}function d(n){return new O(function(t,e){s(n).then(function(n){t(n)},function(n){1===n.code?t(!1):e(n)})})}function p(n){return c(e(n)).then(function(){return s(n,{create:!0})})}function h(n){return s(n).then(function(n){return n.toURL()})}function y(n,t){return t=t||"readAsText",s(n).then(function(n){return new O(function(e,r){n.file(function(n){var r=new FileReader;r.onloadend=function(){e(this.result)},r[t](n)},r)})})}function w(n){return y(n,"readAsDataURL")}function v(n){return y(n).then(JSON.parse)}function m(n,t,r){return c(e(n)).then(function(){return s(n,{create:!0})}).then(function(n){return new O(function(e,o){n.createWriter(function(n){n.onwriteend=e,n.onerror=o,"string"==typeof t?t=new Blob([t],{type:r||"text/plain"}):t instanceof Blob!=!0&&(t=new Blob([JSON.stringify(t,null,4)],{type:r||"application/json"})),n.write(t)},o)})})}function g(n,t){return c(e(t)).then(function(e){return s(n).then(function(n){return new O(function(o,i){n.moveTo(e,r(t),o,i)})})})}function x(n,t){return c(e(t)).then(function(e){return s(n).then(function(n){return new O(function(o,i){n.copyTo(e,r(t),o,i)})})})}function S(n,t){var e=t?s:d;return new O(function(t,r){e(n).then(function(n){n!==!1?n.remove(t,r):t(1)},r)}).then(function(n){return 1===n?!1:!0})}function F(n){return a(n).then(function(n){return new O(function(t,e){n.removeRecursively(t,e)})})}function R(){for(;i.length>0&&u<n.concurrency;){u++;var t=i.pop(),e=t.shift(),r=t.shift(),o=t.shift(),f=t.shift(),c=t.shift(),s=t.shift(),a=t.shift(),l=t.shift();e._aborted?u--:r?(e.download.call(e,o,f,c,s,a,l),e.onprogress&&e.onprogress(new ProgressEvent)):e.upload.call(e,f,o,c,s,l,a)}}function b(n){return u--,R(),n}function T(t,e,r,o,f){"function"==typeof o&&(f=o,o={}),e=encodeURI(e),U&&(r=I(r)),o=o||{},o.retry&&o.retry.length||(o.retry=n.retry),o.retry=o.retry.concat();var c=new FileTransfer;f=f||o.onprogress,"function"==typeof f&&(c.onprogress=f);var s=new O(function(n,f){var s=function(u){if(0===o.retry.length)f(u);else{i.unshift([c,t,e,r,n,s,o.trustAllHosts||!1,o]);var a=o.retry.shift();a>0?setTimeout(b,a):b()}};o.retry.unshift(0),u++,s()});return s.then(b,b),s.progress=function(n){return c.onprogress=n,s},s.abort=function(){return c._aborted=!0,c.abort(),s},s}function E(n,t,e,r){return T(!0,n,t,e,r)}function L(n,t,e,r){return T(!1,t,n,e,r)}var O=n.Promise||window.Promise;if(!O)throw new Error("No Promise library given in options.Promise");this.options=n=n||{},n.persistent=void 0!==n.persistent?n.persistent:!0,n.storageSize=n.storageSize||20971520,n.concurrency=n.concurrency||3,n.retry=n.retry||[];var P,U="undefined"!=typeof cordova;U?P=new O(function(n,t){document.addEventListener("deviceready",n,!1),setTimeout(function(){t(new Error("deviceready has not fired after 5 seconds."))},5100)}):(P=f(!0),"undefined"!=typeof webkitRequestFileSystem?(window.requestFileSystem=webkitRequestFileSystem,window.FileTransfer=function(){},FileTransfer.prototype.download=function(n,t,e,r){var o=new XMLHttpRequest;return o.open("GET",n),o.onreadystatechange=function(){4==o.readyState&&(200===o.status?m(t,o.responseText).then(e,r):r(o.status))},o.send(),o},window.ProgressEvent=function(){}):window.requestFileSystem=function(n,t,e,r){r(new Error("requestFileSystem not supported!"))});var q=new O(function(t,e){P.then(function(){window.requestFileSystem(n.persistent?1:0,n.storageSize,t,e),setTimeout(function(){e(new Error("Could not retrieve FileSystem after 5 seconds."))},5100)},e)});q.then(function(n){window.__fs=n},function(n){console.error("Could not get Cordova FileSystem:",n)});var D,I;return U?(I=function(t){return t=o(t),"cdvfile://localhost/"+(n.persistent?"persistent/":"temporary/")+t},D=function(n){return s(n).then(function(n){return n.toInternalURL()})}):(I=function(t){return t=o(t),"filesystem:"+location.origin+(n.persistent?"/persistent/":"/temporary/")+t},D=function(n){return s(n).then(function(n){return n.toURL()})}),{fs:q,normalize:o,file:s,filename:r,dir:a,dirname:e,create:p,read:y,readJSON:v,write:m,move:g,copy:x,remove:S,removeDir:F,list:l,ensure:c,exists:d,download:E,upload:L,toURL:h,isCordova:U,toInternalURLSync:I,toInternalURL:D,toDataURL:w,deviceready:P,options:n,Promise:O}}}]);